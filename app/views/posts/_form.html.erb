<% action_url = post.persisted? ? post_url(post) : posts_url %>
<% http_method = post.persisted? ? "PATCH" : "POST" %>

<form action="<%= action_url %>" method="POST">
  <input type="hidden" name="_method" value="<%= http_method %>">
  <input
    type="hidden"
    name="authenticity_token"
    value="<%= form_authenticity_token %>">




  <div class="container">
  <div class="create-sub-box">
    <label for="title">
      <input name="post[title]" class="form-control sub-create" value="<%= post.title %>" placeholder="Title">
    </label>
    <br>

  <label>
      <textarea name="post[content]" class="form-control sub-create" placeholder="Content"><%= post.content %></textarea>
  </label>

  <div class="box-checkbox">
    <input type="hidden" name="post[sub_ids][]" value="">
      <% Sub.all.each do |sub| %>
      <label>
        <input
          type="checkbox"
          name="post[sub_ids][]"
          value="<%= sub.id %>"
          <%= "checked" if post.sub_ids.include?(sub.id) %>>
        <%= sub.title %>
      </label>
      <br>
    <% end %>
  </div>

  <hr id="hr-sub">

    <input type="submit" class="btn create-color create-button" value="Submit"></button>
  </div>
</div>
</form>

  
